<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
        $.urlParam = function(name){
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            return results[1] || 0;

        }
        
        $.getJSON( "src/stations.json", function( data ) {
            var items = [];
            var stations = [];
            var str = $.urlParam('s');
            var r = new RegExp(decodeURI(str), 'i');
            $.each( data, function( key, val ) {
                
                var station = {title: val.title, long: val.location.longitude.toString(), lat: val.location.latitude.toString()};
                if(station.title.search(r)!=-1)
                    stations.push(station);


            });

            $.each(stations, function(key,station) {
                items.push( "<li id='" + station.title + "'><p>Estação: "+station.title+"</p><p>Longitude: "+station.long+"</p><p>Latitude: "+station.lat+"</p></li>" );
            })



            $( "<ul/>", {
                "class": "my-new-list",
                html: items.join( "" )
            }).appendTo( "body" );
        });
    </script>


  </head>

  <body>
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>

  </body>
</html>
      
